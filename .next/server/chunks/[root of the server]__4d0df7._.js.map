{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryansagbay/Documents/LoginApiUdipsai/src/libs/database.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\n\nexport const connectMongoDB = async () => {\n    try {\n        // Verificamos que MONGODB_URI esté definido\n        if (!process.env.MONGODB_URL) {\n            throw new Error(\"MONGODB_URI no está definido en las variables de entorno\");\n        }\n\n        await mongoose.connect(process.env.MONGODB_URL);\n        console.log('Conectado a la base de datos');\n    } catch (error) {\n        console.error('Error al conectar a la base de datos:', error);\n    }\n};"],"names":[],"mappings":";;;AAAA;;AAGO,MAAM,iBAAiB;IAC1B,IAAI;QACA,4CAA4C;QAC5C,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;YAC1B,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW;QAC9C,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yCAAyC;IAC3D;AACJ"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryansagbay/Documents/LoginApiUdipsai/src/models/User.ts"],"sourcesContent":["import mongoose,{ Schema, Document, ObjectId} from \"mongoose\";\n\n\nexport interface IUser {\n    _id?: ObjectId | string | undefined;\n    email: string;\n    password: string;\n    createdAt?: Date;\n    updatedAt?: Date;\n}\n\nexport interface IUserSchema extends Document {\n    email: string;\n    password: string;\n    createdAt?: Date;\n    updatedAt?: Date;\n}\n\nconst UserSchema: Schema = new Schema(\n    {\n        email: { type: String, required: true, unique: true },\n        password: { type: String, required: true },\n    },{\n        versionKey: false,\n        timestamps: true,\n    }\n\n);\n\n\nconst User = mongoose.models.User || mongoose.model(\"User\", UserSchema)\nexport default User;"],"names":[],"mappings":";;;AAAA;;AAkBA,MAAM,aAAqB,IAAI,yGAAA,CAAA,SAAM,CACjC;IACI,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;AAC7C,GAAE;IACE,YAAY;IACZ,YAAY;AAChB;AAKJ,MAAM,OAAO,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ;uCAC7C"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryansagbay/Documents/LoginApiUdipsai/src/utils/messages.ts"],"sourcesContent":["export const messages = {\n    error: {\n        needProps: 'Porfavor ingresa email, password and confirmPassword',\n        emailNotValid: 'Email no valido:',\n        isValidPassword: 'Porfavor revisa que las contraseñas coincidan',\n        emailExist: 'El usuario ya existe',\n        default: 'Algo salió mal',\n        UserNotFound: 'Usuario no encontrado',\n        incorredPassword: 'Contraseña incorrecta',\n        notAutorized: 'No autorizado',\n        PasswordNotMatch: 'Las contraseñas no coinciden',\n        tokenNotValid: 'Token no valido',\n    },\n    success: {\n        userCreated: 'Usuario creado exitosamente',\n        userLogged: 'Usuario logeado exitosamente',\n        emailSend: 'Correo enviado exitosamente',\n        passwordChanged: 'Contraseña cambiada exitosamente',\n        authorized: 'Autorizado',\n    }\n\n};"],"names":[],"mappings":";;;AAAO,MAAM,WAAW;IACpB,OAAO;QACH,WAAW;QACX,eAAe;QACf,iBAAiB;QACjB,YAAY;QACZ,SAAS;QACT,cAAc;QACd,kBAAkB;QAClB,cAAc;QACd,kBAAkB;QAClB,eAAe;IACnB;IACA,SAAS;QACL,aAAa;QACb,YAAY;QACZ,WAAW;QACX,iBAAiB;QACjB,YAAY;IAChB;AAEJ"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryansagbay/Documents/LoginApiUdipsai/src/app/api/auth/login/route.ts"],"sourcesContent":["    import { connectMongoDB } from \"@/libs/database\";\n    import User, { IUser } from \"@/models/User\";\n    import { messages } from \"@/utils/messages\";\n    import bcrypt from \"bcryptjs\";\n    import { NextRequest, NextResponse } from \"next/server\";\n    import jwt from \"jsonwebtoken\";\n\n    export async function POST(request: NextRequest) {\n\n        try{\n\n            await connectMongoDB();\n\n            const body: IUser = await request.json();\n            const {email, password} = body;\n\n            //Validamos que los campos no esten vacios\n            if(!email || !password){\n                return NextResponse.json(\n                {\n                    messages: messages.error.needProps\n                },\n                {\n                    status: 400\n                }\n                )\n            }\n\n            const UserFind = await User.findOne({email});\n\n            // Validamos que el usuario exista\n            if(!UserFind){\n                return NextResponse.json(\n                {\n                    messages: messages.error.UserNotFound\n                },\n                {\n                    status: 400\n                }\n                )\n            }\n\n            const isCorret: boolean = await bcrypt.compare(password, UserFind.password);\n\n            // Validamos que la contraseña sea correcta\n            if(!isCorret){\n                return NextResponse.json(\n                {\n                    messages: messages.error.incorredPassword\n                },\n                {\n                    status: 400\n                }\n                )\n            }\n\n            // @ts-ignore\n            const { password: userPass, ...rest} = UserFind._doc;\n\n            if (!process.env.JWT_SECRET) {\n                        return NextResponse.json(\n                            { message: \"JWT_SECRET no está definido en las variables de entorno\" },\n                            { status: 500 }\n                        );\n                    }\n\n            const token = jwt.sign({data: rest}, process.env.JWT_SECRET , {expiresIn: 86400});\n            \n            const response = NextResponse.json(\n                { userLogged: rest, messages: messages.success.userLogged, token },\n                { status: 200 }\n            );\n            response.cookies.set(\"auth_cookie\", token, {\n                secure: process.env.NODE_ENV === \"production\",\n                sameSite: \"strict\",\n                maxAge: 86400,\n                path: \"/\",\n            });\n\n            return response;\n\n        } catch (error) {\n            return NextResponse.json(\n                { messages: messages.error.default, error},\n                { status: 500 }\n            );\n        }\n\n    }"],"names":[],"mappings":";;;AAAI;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,eAAe,KAAK,OAAoB;IAE3C,IAAG;QAEC,MAAM,CAAA,GAAA,yHAAA,CAAA,iBAAc,AAAD;QAEnB,MAAM,OAAc,MAAM,QAAQ,IAAI;QACtC,MAAM,EAAC,KAAK,EAAE,QAAQ,EAAC,GAAG;QAE1B,0CAA0C;QAC1C,IAAG,CAAC,SAAS,CAAC,UAAS;YACnB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACxB;gBACI,UAAU,0HAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,SAAS;YACtC,GACA;gBACI,QAAQ;YACZ;QAEJ;QAEA,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAI,CAAC,OAAO,CAAC;YAAC;QAAK;QAE1C,kCAAkC;QAClC,IAAG,CAAC,UAAS;YACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACxB;gBACI,UAAU,0HAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,YAAY;YACzC,GACA;gBACI,QAAQ;YACZ;QAEJ;QAEA,MAAM,WAAoB,MAAM,mIAAA,CAAA,UAAM,CAAC,OAAO,CAAC,UAAU,SAAS,QAAQ;QAE1E,2CAA2C;QAC3C,IAAG,CAAC,UAAS;YACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACxB;gBACI,UAAU,0HAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,gBAAgB;YAC7C,GACA;gBACI,QAAQ;YACZ;QAEJ;QAEA,aAAa;QACb,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,MAAK,GAAG,SAAS,IAAI;QAEpD,IAAI,CAAC,QAAQ,GAAG,CAAC,UAAU,EAAE;YACjB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;YAA0D,GACrE;gBAAE,QAAQ;YAAI;QAEtB;QAER,MAAM,QAAQ,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC;YAAC,MAAM;QAAI,GAAG,QAAQ,GAAG,CAAC,UAAU,EAAG;YAAC,WAAW;QAAK;QAE/E,MAAM,WAAW,gIAAA,CAAA,eAAY,CAAC,IAAI,CAC9B;YAAE,YAAY;YAAM,UAAU,0HAAA,CAAA,WAAQ,CAAC,OAAO,CAAC,UAAU;YAAE;QAAM,GACjE;YAAE,QAAQ;QAAI;QAElB,SAAS,OAAO,CAAC,GAAG,CAAC,eAAe,OAAO;YACvC,QAAQ,oDAAyB;YACjC,UAAU;YACV,QAAQ;YACR,MAAM;QACV;QAEA,OAAO;IAEX,EAAE,OAAO,OAAO;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACpB;YAAE,UAAU,0HAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,OAAO;YAAE;QAAK,GACzC;YAAE,QAAQ;QAAI;IAEtB;AAEJ"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}